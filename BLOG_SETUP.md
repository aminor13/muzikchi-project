# راهنمای راه‌اندازی بلاگ موزیکچی

## خلاصه
بلاگ موزیکچی یک سیستم کامل برای مدیریت و نمایش مقالات موسیقی است که شامل صفحات عمومی، پنل مدیریت و قابلیت‌های پیشرفته می‌باشد.

## ویژگی‌های اصلی

### 🎯 صفحات عمومی
- **صفحه اصلی بلاگ** (`/blog`): نمایش مقالات با قابلیت جستجو و فیلتر
- **صفحه مقاله** (`/blog/[slug]`): نمایش کامل مقاله با مقالات مرتبط
- **صفحه دسته‌بندی** (`/blog/category/[slug]`): نمایش مقالات یک دسته‌بندی خاص

### 🛠️ پنل مدیریت (فقط برای ادمین‌ها)
- **مدیریت مقالات** (`/admin/blog`): لیست، ویرایش، حذف و تغییر وضعیت مقالات
- **ایجاد مقاله جدید** (`/admin/blog/new`): ویرایشگر کامل برای ایجاد مقاله
- **مدیریت دسته‌بندی‌ها** (`/admin/blog/categories`): ایجاد و مدیریت دسته‌بندی‌ها

### 🎨 کامپوننت‌ها
- `BlogCard`: کارت نمایش مقاله
- `BlogList`: لیست مقالات با قابلیت‌های مختلف
- `BlogSidebar`: نوار کناری با دسته‌بندی‌ها و مقالات محبوب
- `BlogSearch`: جستجوی پیشرفته
- `BlogEditor`: ویرایشگر مقالات

## نصب و راه‌اندازی

### 1. اجرای Migration های دیتابیس
```bash
# اجرای migration برای ایجاد جداول بلاگ
supabase db push
```

### 2. دسترسی ادمین
برای دسترسی به پنل مدیریت بلاگ، کاربر باید `is_admin = true` در جدول `profiles` داشته باشد.

### 3. تنظیمات اولیه
- دسته‌بندی‌های پیش‌فرض به صورت خودکار ایجاد می‌شوند
- نمونه مقالات برای تست در migration موجود است

## ساختار دیتابیس

### جدول `blog_categories`
```sql
- id: UUID (Primary Key)
- name: نام دسته‌بندی
- slug: نامک دسته‌بندی
- description: توضیحات
- color: رنگ دسته‌بندی (hex)
- created_at, updated_at: زمان‌ها
```

### جدول `blog_posts`
```sql
- id: UUID (Primary Key)
- title: عنوان مقاله
- slug: نامک مقاله
- excerpt: خلاصه مقاله
- content: محتوای کامل
- featured_image_url: تصویر شاخص
- author_id: نویسنده (FK to profiles)
- category_id: دسته‌بندی (FK to blog_categories)
- status: وضعیت (draft/published/archived)
- published_at: زمان انتشار
- reading_time: زمان مطالعه (دقیقه)
- tags: برچسب‌ها (array)
- view_count: تعداد بازدید
- created_at, updated_at: زمان‌ها
```

### جدول `blog_post_views`
```sql
- id: UUID (Primary Key)
- post_id: مقاله (FK to blog_posts)
- user_id: کاربر (FK to profiles, nullable)
- ip_address: آدرس IP
- user_agent: مرورگر
- viewed_at: زمان بازدید
```

## نحوه استفاده

### برای کاربران عادی
1. مراجعه به `/blog` برای مشاهده مقالات
2. استفاده از جستجو و فیلترها
3. کلیک روی مقالات برای مطالعه کامل
4. مشاهده مقالات مرتبط و محبوب

### برای ادمین‌ها
1. ورود به `/admin/blog` برای مدیریت مقالات
2. ایجاد مقاله جدید با `/admin/blog/new`
3. مدیریت دسته‌بندی‌ها با `/admin/blog/categories`
4. ویرایش، حذف و تغییر وضعیت مقالات

## ویژگی‌های پیشرفته

### 🔍 جستجو و فیلتر
- جستجو در عنوان، خلاصه و محتوا
- فیلتر بر اساس دسته‌بندی
- مرتب‌سازی بر اساس تاریخ، بازدید و عنوان

### 📊 آمار و تحلیل
- شمارش بازدید مقالات
- ردیابی بازدیدکنندگان
- نمایش مقالات محبوب

### 🎨 طراحی ریسپانسیو
- سازگار با موبایل و تبلت
- طراحی مدرن و زیبا
- انیمیشن‌های نرم

### 🔒 امنیت
- Row Level Security (RLS) فعال
- دسترسی محدود به ادمین‌ها
- اعتبارسنجی ورودی‌ها

## سفارشی‌سازی

### تغییر استایل‌ها
فایل‌های CSS در `tailwind.config.js` قابل تنظیم هستند.

### اضافه کردن ویژگی‌های جدید
- کامپوننت‌های جدید در `components/blog/`
- صفحات جدید در `app/blog/` یا `app/admin/blog/`

### تنظیم دسته‌بندی‌ها
دسته‌بندی‌های جدید از پنل مدیریت قابل اضافه هستند.

## نکات مهم

1. **تصاویر**: برای تصاویر شاخص از URL های معتبر استفاده کنید
2. **SEO**: نامک‌ها (slug) باید منحصر به فرد و SEO-friendly باشند
3. **محتوا**: محتوای HTML در فیلد content ذخیره می‌شود
4. **برچسب‌ها**: برچسب‌ها با کاما جدا می‌شوند
5. **زمان مطالعه**: به صورت خودکار محاسبه می‌شود

## عیب‌یابی

### مشکلات رایج
1. **دسترسی غیرمجاز**: بررسی `is_admin` در جدول profiles
2. **مقالات نمایش داده نمی‌شوند**: بررسی وضعیت `published`
3. **خطاهای دیتابیس**: بررسی migration ها

### لاگ‌ها
خطاها در console مرورگر و server logs قابل مشاهده هستند.

## پشتیبانی

برای سوالات و مشکلات، با تیم توسعه تماس بگیرید.

---

**نکته**: این سیستم کاملاً یکپارچه با پلتفرم موزیکچی طراحی شده و از همان سیستم احراز هویت و مدیریت کاربران استفاده می‌کند.

